# Build phase
FROM nvidia/cuda:10.0-cudnn7-devel-ubuntu18.04 as builder

ENV darknet_commit=a234a5022333c930de08f2470184ef4e0c68356e

WORKDIR /root/build
COPY Makefile.gpu .
RUN apt-get -y update && \
        apt-get -y install git build-essential nano bash && \
        git clone https://github.com/AlexeyAB/darknet.git && \
        cd darknet && \
        git checkout $darknet_commit && \
        cp -f /root/build/Makefile.gpu Makefile && \
        make

CMD ["/bin/bash"]

